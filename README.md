# read-javascript  

# 你不知道的JavaScript （上卷）

## 第一章  作用域是什么  

### 1.1 编译原理

分词/词法分析 解析/语法分析 代码生成

### 1.2 理解作用域

1. 引擎

从头到尾负责整个JavaScript程序的编译及执行过程。

2. 编译器

引擎的好朋友之一，负责语法分析及代码生成

3. 作用域

负责收集并维护由所有生命的标识符（变量）组成的一系列查询，并实施一套非常严格的规则，确定当前执行的代码对这些标识符的访问权限。

LHS查询：试图找到变量的容器本身

RHS查询：查找某个变量的值

### 1.4 异常

如果RHS查询在所有嵌套的作用域中遍寻不到所需的变量，引擎就会抛出ReferenceError（reference 引用 参考）异常。

如果RHS查询找到了一个变量，但是你尝试对这个变量的值进行不合理的操作，比如试图对一个非函数类型的值进行函数调用，或者null或undefined类型的值中的属性，那么引擎会抛出另外一种类型的异常，叫作TypeError。

ReferenceError同作用域判别失败相关，而TypeError则代表作用域判别成功了，但是对结果的操作是非法或不合理的。

### 1.5 小结

作用域是一套规则，用于确定在何处以及如何查找变量（标识符）。如果查找的目的是对变量进行赋值，那么就会使用LHS查询；如果目的是获取变量的值，就会使用RHS查询。

不成功的RHS引用会导致抛出ReferenceError异常。不成功的LHS引用会导致自动隐式地创建一个全局变量（非严格模式下），该变量使用LHS引用的目标作者为标识符，或者抛出ReferenceError异常（严格模式下）。
